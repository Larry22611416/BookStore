<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ›¸å®¢ä¾† - ç·šä¸Šæ›¸åº—</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Microsoft YaHei", "å¾®è»Ÿé›…é»‘", Arial, sans-serif;
            background-color: #f5f5f5;
        }

        /* é ‚éƒ¨å°èˆª */
        .top-nav {
            background-color: #fff;
            border-bottom: 1px solid #e0e0e0;
            padding: 8px 0;
        }

        .top-nav .container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            font-size: 13px;
        }

        .nav-left a, .nav-right a {
            color: #666;
            text-decoration: none;
            margin: 0 10px;
        }

        .nav-left a:hover, .nav-right a:hover {
            color: #4CAF50;
        }

        .cart-count {
            color: #ff6b35;
            font-weight: bold;
        }

        /* ä¿ƒéŠ·æ©«å¹… */
        .promo-banner {
            background: linear-gradient(135deg, #4CAF50, #2E8B57);
            color: white;
            text-align: center;
            padding: 12px;
            font-size: 16px;
            font-weight: bold;
        }

        .promo-banner .highlight {
            background-color: #ff6b35;
            padding: 2px 8px;
            border-radius: 4px;
            margin: 0 5px;
        }

        /* ä¸»è¦æœå°‹å€åŸŸ */
        .search-section {
            background-color: #fff;
            padding: 20px 0;
        }

        .search-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            padding: 0 20px;
        }

        .logo {
            margin-right: 30px;
        }

        .logo h1 {
            color: #4CAF50;
            font-size: 28px;
            font-weight: bold;
        }

        .search-box {
            flex: 1;
            display: flex;
            max-width: 600px;
        }

        .category-select {
            background-color: #f8f8f8;
            border: 2px solid #4CAF50;
            border-right: none;
            padding: 12px 15px;
            font-size: 14px;
            border-radius: 25px 0 0 25px;
            outline: none;
        }

        .search-input {
            flex: 1;
            border: 2px solid #4CAF50;
            border-left: none;
            border-right: none;
            padding: 12px 15px;
            font-size: 14px;
            outline: none;
        }

        .search-btn {
            background-color: #4CAF50;
            color: white;
            border: 2px solid #4CAF50;
            padding: 12px 20px;
            font-size: 14px;
            border-radius: 0 25px 25px 0;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .search-btn:hover {
            background-color: #45a049;
        }

        .promo-tags {
            margin-left: 20px;
            display: flex;
            gap: 10px;
        }

        .tag {
            background-color: #ff6b35;
            color: white;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 12px;
            text-decoration: none;
            white-space: nowrap;
        }

        .tag.hot {
            background-color: #e74c3c;
        }

        /* ä¸»è¦å…§å®¹å€åŸŸ */
        .main-content {
            max-width: 1200px;
            margin: 20px auto;
            display: flex;
            gap: 20px;
            padding: 0 20px;
        }

        /* å·¦å´åˆ†é¡é¸å–® */
        .sidebar {
            width: 250px;
            background-color: #fff;
            border-radius: 8px;
            overflow: hidden;
            height: fit-content;
        }

        .category-header {
            background-color: #4CAF50;
            color: white;
            padding: 15px;
            font-size: 16px;
            font-weight: bold;
        }

        .category-list {
            list-style: none;
        }

        .category-item {
            border-bottom: 1px solid #f0f0f0;
        }

        .category-item a {
            display: block;
            padding: 12px 15px;
            color: #333;
            text-decoration: none;
            transition: background-color 0.3s;
            cursor: pointer;
        }

        .category-item a:hover {
            background-color: #f8f8f8;
            color: #4CAF50;
        }

        .category-item.featured a {
            color: #4CAF50;
            font-weight: bold;
        }

        /* ä¸»è¦å±•ç¤ºå€åŸŸ */
        .content-area {
            flex: 1;
        }

        /* è¼ªæ’­å€åŸŸ */
        .carousel-container {
            background-color: #fff;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .carousel {
            position: relative;
            height: 300px;
            overflow: hidden;
        }

        .carousel-slide {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-align: center;
        }

        .slide-content h2 {
            font-size: 32px;
            margin-bottom: 10px;
            cursor: pointer;
        }

        .slide-content p {
            font-size: 18px;
            margin-bottom: 20px;
        }

        .carousel-nav {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
        }

        .nav-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: rgba(255,255,255,0.5);
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .nav-dot.active {
            background-color: white;
        }

        /* æ¨è–¦æ›¸ç±å€åŸŸ */
        .book-sections {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .book-section {
            background-color: #fff;
            border-radius: 8px;
            padding: 20px;
        }

        .section-title {
            color: #4CAF50;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 5px;
        }

        .book-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
        }

        .book-item {
            text-align: center;
        }

        .book-cover {
            width: 100%;
            height: 160px;
            background-color: #f0f0f0;
            border-radius: 4px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            font-size: 12px;
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .book-title {
            font-size: 13px;
            color: #333;
            margin-bottom: 5px;
            line-height: 1.4;
        }

        .book-price {
            color: #e74c3c;
            font-weight: bold;
            font-size: 14px;
        }

        /* æ´»å‹•æ¨è–¦å€åŸŸ */
        .activity-section {
            margin-top: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .activity-card {
            background-color: #fff;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }

        .activity-title {
            color: #4CAF50;
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .activity-desc {
            color: #666;
            font-size: 14px;
            margin-bottom: 15px;
        }

        .activity-btn {
            background-color: #4CAF50;
            color: white;
            padding: 8px 20px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            transition: background-color 0.3s;
        }

        .activity-btn:hover {
            background-color: #45a049;
        }

        /* æ©«å‘æ²å‹•æ›¸ç±æ¨è–¦å€åŸŸ */
        .horizontal-sections {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
        }

        .horizontal-section {
            background-color: #fff;
            border-radius: 8px;
            margin-bottom: 25px;
            overflow: hidden;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 25px 15px;
            border-bottom: 1px solid #f0f0f0;
        }

        .section-badge {
            background-color: #ff6b35;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
        }

        .section-badge.today-deal {
            background-color: #e74c3c;
        }

        .section-tabs {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .tab {
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .tab.active {
            background-color: #4CAF50;
            color: white;
        }

        .tab.highlight {
            background-color: #4CAF50;
            color: white;
        }

        .tab:not(.active):not(.highlight):hover {
            background-color: #f0f0f0;
        }

        .more-link {
            color: #4CAF50;
            text-decoration: none;
            font-size: 14px;
            white-space: nowrap;
        }

        .more-link:hover {
            text-decoration: underline;
        }

        .horizontal-scroll-container {
            position: relative;
            padding: 20px 25px;
        }

        .horizontal-scroll {
            display: flex;
            gap: 20px;
            overflow-x: auto;
            scroll-behavior: smooth;
            scrollbar-width: none;
            -ms-overflow-style: none;
            padding-bottom: 10px;
        }

        .horizontal-scroll::-webkit-scrollbar {
            display: none;
        }

        .scroll-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(255,255,255,0.9);
            border: 1px solid #ddd;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2;
            transition: all 0.3s;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .scroll-btn:hover {
            background-color: #4CAF50;
            color: white;
            border-color: #4CAF50;
        }

        .scroll-left {
            left: 5px;
        }

        .scroll-right {
            right: 5px;
        }

        .book-card {
            min-width: 200px;
            background-color: #fff;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .book-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }

        .book-card.deal-card {
            border: 2px solid #ff6b35;
        }

        .book-card.bestseller-card {
            min-width: 180px;
        }

        .ranking-number {
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: #4CAF50;
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 12px;
            z-index: 2;
        }

        .discount-label {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #e74c3c;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: bold;
            z-index: 2;
        }

        .book-image {
            width: 100%;
            height: 250px;
            background-color: #f5f5f5;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            font-size: 12px;
            background-size: cover;
            background-position: center;
        }

        .book-info {
            padding: 15px;
        }

        .book-title {
            font-size: 13px;
            line-height: 1.4;
            color: #333;
            margin-bottom: 10px;
            height: 35px;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        .book-price {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap;
        }

        .current-price {
            color: #e74c3c;
            font-weight: bold;
            font-size: 16px;
        }

        .original-price {
            color: #999;
            font-size: 13px;
            text-decoration: line-through;
        }

        .discount-badge {
            background-color: #ff6b35;
            color: white;
            padding: 2px 6px;
            border-radius: 8px;
            font-size: 10px;
        }

        /* é å°¾æ¨£å¼ */
        .footer {
            background-color: #4CAF50;
            color: white;
            margin-top: 50px;
        }

        .footer-apps {
            background-color: #fff;
            padding: 20px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .app-links {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            flex-wrap: wrap;
            padding: 0 20px;
        }

        .app-link {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #333;
            text-decoration: none;
            font-size: 13px;
            transition: color 0.3s;
        }

        .app-link:hover {
            color: #4CAF50;
        }

        .app-icon {
            width: 24px;
            height: 24px;
            background-color: #ddd;
            border-radius: 4px;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 40px;
            padding: 40px 20px;
        }

        .footer-section h4 {
            color: white;
            font-size: 16px;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section li {
            margin-bottom: 8px;
        }

        .footer-section a, .footer-section span {
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            font-size: 13px;
            transition: color 0.3s;
        }

        .footer-section a:hover {
            color: white;
        }

        .footer-bottom {
            background-color: #388E3C;
            padding: 20px 0;
            text-align: center;
        }

        .footer-info {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            margin-bottom: 15px;
        }

        .footer-info p {
            color: rgba(255,255,255,0.8);
            font-size: 12px;
            margin-bottom: 5px;
        }

        .footer-policies {
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .footer-policies a {
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            font-size: 12px;
        }

        .footer-policies a:hover {
            color: white;
        }

        /* æ‡¸æµ®æŒ‰éˆ• */
        .floating-buttons {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            z-index: 1000;
        }

        .float-btn {
            width: 55px;
            height: 55px;
            border-radius: 50%;
            border: none;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .customer-service {
            background-color: #4CAF50;
            color: white;
        }

        .customer-service:hover {
            background-color: #45a049;
            transform: scale(1.1);
        }

        .back-to-top {
            background-color: #666;
            color: white;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }

        .back-to-top.show {
            opacity: 1;
            visibility: visible;
        }

        .back-to-top:hover {
            background-color: #555;
            transform: scale(1.1);
        }

        /* è¼‰å…¥å‹•ç•« */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
            }
            
            .search-container {
                flex-direction: column;
                gap: 15px;
            }
            
            .search-box {
                max-width: 100%;
            }
            
            .promo-tags {
                margin-left: 0;
                flex-wrap: wrap;
            }
            
            .book-sections {
                grid-template-columns: 1fr;
            }

            .horizontal-sections {
                padding: 0 10px;
            }

            .section-tabs {
                gap: 10px;
            }

            .tab {
                font-size: 12px;
                padding: 6px 12px;
            }

            .horizontal-scroll-container {
                padding: 15px 20px;
            }

            .book-card {
                min-width: 160px;
            }

            .book-image {
                height: 200px;
            }

            .app-links {
                flex-direction: column;
                gap: 15px;
            }

            .footer-content {
                grid-template-columns: repeat(2, 1fr);
                gap: 30px;
                padding: 30px 20px;
            }

            .footer-policies {
                flex-direction: column;
                gap: 10px;
            }

            .floating-buttons {
                bottom: 20px;
                right: 20px;
            }

            .float-btn {
                width: 50px;
                height: 50px;
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
    <!-- é ‚éƒ¨å°èˆª -->
    <div class="top-nav">
        <div class="container">
            <div class="nav-left">
                <a href="#" onclick="goHome()">å›é¦–é </a>
                <a href="#" onclick="showNewReleases()">æ–°æ›¸æ¨è–¦</a>
                <a href="#" onclick="showBestsellers()">æš¢éŠ·æ¦œ</a>
                <a href="#" onclick="showEbooks()">é›»å­æ›¸åŸ</a>
            </div>
            <div class="nav-right">
                <a href="#" onclick="showLogin()">æœƒå“¡ç™»å…¥</a>
                <a href="#" onclick="showOrders()">è¨‚å–®æŸ¥è©¢</a>
                <a href="shopping.html">è³¼ç‰©è»Š(<span class="cart-count" id="cartCount">0</span>)</a>
                <a href="#" onclick="toggleLanguage()">ç¹é«”</a>
            </div>
        </div>
    </div>

    <!-- ä¿ƒéŠ·æ©«å¹… -->
    <div class="promo-banner">
        ğŸ“š è®€æ›¸æ—¥ç‰¹æƒ  <span class="highlight">å…¨ç«™æ›¸ç±æ»¿$500å…é‹</span> å†äº«<span class="highlight">85æŠ˜</span>èµ· ğŸ“š
    </div>

    <!-- æœå°‹å€åŸŸ -->
    <div class="search-section">
        <div class="search-container">
            <div class="logo">
                <h1>æ›¸å®¢ä¾†</h1>
            </div>
            <div class="search-box">
                <select class="category-select" id="searchCategory">
                    <option value="all">å…¨éƒ¨</option>
                    <option value="chinese">ä¸­æ–‡æ›¸</option>
                    <option value="english">å¤–æ–‡æ›¸</option>
                    <option value="ebook">é›»å­æ›¸</option>
                    <option value="magazine">é›œèªŒ</option>
                </select>
                <input type="text" class="search-input" placeholder="è«‹è¼¸å…¥é—œéµå­—" id="searchInput">
                <button class="search-btn" onclick="performSearch()">æœå°‹</button>
            </div>
            <div class="promo-tags">
                <a href="#" class="tag hot">HOT</a>
                <a href="#" class="tag" onclick="quickSearch('é›»å­æ›¸')">é›»å­æ›¸ç‰¹åƒ¹</a>
                <a href="#" class="tag" onclick="quickSearch('æ¨è–¦æ›¸')">æœ¬æœˆé¸æ›¸</a>
                <a href="#" class="tag" onclick="quickSearch('æ–‡å­¸å°èªª')">æš¢éŠ·æ–‡å­¸</a>
            </div>
        </div>
    </div>

    <!-- ä¸»è¦å…§å®¹ -->
    <div class="main-content">
        <!-- å·¦å´åˆ†é¡é¸å–® -->
        <div class="sidebar">
            <div class="category-header">
                å…¨ç«™åˆ†é¡
            </div>
            <ul class="category-list">
                <li class="category-item featured"><a onclick="showCategory('featured')">æ——è‰¦æ›¸å±•</a></li>
                <li class="category-item"><a onclick="showCategory('chinese')">ä¸­æ–‡æ›¸</a></li>
                <li class="category-item"><a onclick="showCategory('simplified')">ç°¡é«”æ›¸</a></li>
                <li class="category-item"><a onclick="showCategory('english')">å¤–æ–‡æ›¸</a></li>
                <li class="category-item"><a onclick="showCategory('ebook')">é›»å­æ›¸</a></li>
                <li class="category-item"><a onclick="showCategory('audiobook')">æœ‰è²æ›¸</a></li>
                <li class="category-item"><a onclick="showCategory('subscription')">è¨‚é–±æœå‹™</a></li>
                <li class="category-item"><a onclick="showCategory('magazine')">é›œèªŒ</a></li>
                <li class="category-item"><a onclick="showCategory('japanese')">æ—¥æ–‡æ›¸</a></li>
                <li class="category-item"><a onclick="showCategory('textbook')">æ•™ç§‘æ›¸</a></li>
                <li class="category-item"><a onclick="showCategory('reference')">åƒè€ƒæ›¸</a></li>
            </ul>
        </div>

        <!-- ä¸»è¦å±•ç¤ºå€åŸŸ -->
        <div class="content-area">
            <!-- è¼ªæ’­å»£å‘Š -->
            <div class="carousel-container">
                <div class="carousel">
                    <div class="carousel-slide">
                        <div class="slide-content">
                            <h2>æ–°æ›¸ä¸Šå¸‚</h2>
                            <p>æ¢ç´¢æœ€æ–°å‡ºç‰ˆçš„ç²¾å½©æ›¸ç±</p>
                        </div>
                    </div>
                    <div class="carousel-nav">
                        <div class="nav-dot active"></div>
                        <div class="nav-dot"></div>
                        <div class="nav-dot"></div>
                    </div>
                </div>
            </div>

            <!-- æ›¸ç±æ¨è–¦å€åŸŸ -->
            <div class="book-sections">
                <div class="book-section">
                    <div class="section-title">æœ¬é€±æš¢éŠ·</div>
                    <div class="book-grid">
                        <!-- æ›¸ç±å°‡é€šé JavaScript å‹•æ…‹è¼‰å…¥ -->
                    </div>
                </div>

                <div class="book-section">
                    <div class="section-title">ç·¨è¼¯æ¨è–¦</div>
                    <div class="book-grid">
                        <!-- æ›¸ç±å°‡é€šé JavaScript å‹•æ…‹è¼‰å…¥ -->
                    </div>
                </div>
            </div>

            <!-- æ´»å‹•æ¨è–¦ -->
            <div class="activity-section">
                <div class="activity-card">
                    <div class="activity-title">ğŸ“– å¥½è®€æ´»å‹•</div>
                    <div class="activity-desc">æ¯æ—¥ç²¾é¸å¥½æ›¸æ¨è–¦ï¼Œé–‹å•Ÿé–±è®€æ–°é«”é©—</div>
                    <a href="#" class="activity-btn" onclick="showActivity('reading')">ç«‹å³åƒèˆ‡</a>
                </div>
                <div class="activity-card">
                    <div class="activity-title">ğŸ¯ æœƒå“¡å°ˆå±¬å„ªæƒ </div>
                    <div class="activity-desc">æœƒå“¡ç¨äº«æŠ˜æ‰£ï¼Œè³¼æ›¸æ›´å„ªæƒ </div>
                    <a href="#" class="activity-btn" onclick="showActivity('member')">æŸ¥çœ‹å„ªæƒ </a>
                </div>
                <div class="activity-card">
                    <div class="activity-title">â­ æ¯æ—¥ç°½åˆ°</div>
                    <div class="activity-desc">å¤©å¤©ç°½åˆ°ç´¯ç©é»æ•¸ï¼Œå…Œæ›è³¼æ›¸é‡‘</div>
                    <a href="#" class="activity-btn" onclick="showActivity('checkin')">é¦¬ä¸Šç°½åˆ°</a>
                </div>
            </div>
        </div>
    </div>

    <!-- æ©«å‘æ²å‹•æ›¸ç±æ¨è–¦å€åŸŸ -->
    <div class="horizontal-sections">
        <!-- ä»Šæ—¥66æŠ˜ -->
        <div class="horizontal-section">
            <div class="section-header">
                <div class="section-badge today-deal">ğŸ“š ä»Šæ—¥66æŠ˜</div>
                <a href="#" class="more-link">æ›´å¤š ></a>
            </div>
            <div class="horizontal-scroll-container">
                <button class="scroll-btn scroll-left" onclick="scrollHorizontal('today-deals', -1)">â€¹</button>
                <div class="horizontal-scroll" id="today-deals">
                    <!-- æ›¸ç±å°‡é€šé JavaScript å‹•æ…‹è¼‰å…¥ -->
                </div>
                <button class="scroll-btn scroll-right" onclick="scrollHorizontal('today-deals', 1)">â€º</button>
            </div>
        </div>

        <!-- ä¸­æ–‡å‡ºç‰ˆæ¨è–¦ -->
        <div class="horizontal-section">
            <div class="section-header">
                <div class="section-tabs">
                    <span class="tab active">ä¸­æ–‡å‡ºç‰ˆ</span>
                    <span class="tab highlight">é—œè®€æ³¨ç›®</span>
                    <span class="tab">åšå®¢ä¾†é¸æ›¸</span>
                    <span class="tab">ç†±éŠ·æ–°æ›¸</span>
                    <span class="tab">å•†æ¥­ç†è²¡</span>
                    <span class="tab">äººæ–‡è—è¡“</span>
                    <span class="tab">å¿ƒç†å‹µå¿—</span>
                    <span class="tab">å°èªªâ€§æ¼«ç•«</span>
                </div>
                <a href="#" class="more-link">æ›´å¤š ></a>
            </div>
            <div class="horizontal-scroll-container">
                <button class="scroll-btn scroll-left" onclick="scrollHorizontal('chinese-books', -1)">â€¹</button>
                <div class="horizontal-scroll" id="chinese-books">
                    <!-- æ›¸ç±å°‡é€šé JavaScript å‹•æ…‹è¼‰å…¥ -->
                </div>
                <button class="scroll-btn scroll-right" onclick="scrollHorizontal('chinese-books', 1)">â€º</button>
            </div>
        </div>

        <!-- å¿…è®€æš¢éŠ·æ¦œ -->
        <div class="horizontal-section">
            <div class="section-header">
                <div class="section-tabs">
                    <span class="tab active">å…¨ç«™</span>
                    <span class="tab">ä¸­æ–‡æ›¸</span>
                    <span class="tab">é›»å­æ›¸</span>
                    <span class="tab">æœ‰è²æ›¸</span>
                    <span class="tab">å‹•æ¼«</span>
                    <span class="tab">ç°¡é«”æ›¸</span>
                    <span class="tab">æ—¥æ–‡æ›¸</span>
                    <span class="tab more-tab" onclick="showMoreTabs()">çœ‹æ›´å¤š ></span>
                </div>
            </div>
            <div class="horizontal-scroll-container">
                <button class="scroll-btn scroll-left" onclick="scrollHorizontal('bestseller-books', -1)">â€¹</button>
                <div class="horizontal-scroll" id="bestseller-books">
                    <!-- æ›¸ç±å°‡é€šé JavaScript å‹•æ…‹è¼‰å…¥ -->
                </div>
                <button class="scroll-btn scroll-right" onclick="scrollHorizontal('bestseller-books', 1)">â€º</button>
            </div>
        </div>
    </div>

    <!-- é å°¾ -->
    <footer class="footer">
        <div class="footer-apps">
            <div class="app-links">
                <a href="#" class="app-link">
                    <img src="#" alt="Appåœ–æ¨™" class="app-icon">
                    <span>æ›¸å®¢ä¾† App ä¸‹è¼‰</span>
                </a>
                <a href="#" class="app-link">
                    <img src="#" alt="é›»å­æ›¸Appåœ–æ¨™" class="app-icon">
                    <span>æ›¸å®¢ä¾† é›»å­æ›¸App ä¸‹è¼‰</span>
                </a>
                <a href="#" class="app-link">
                    <img src="#" alt="Facebookåœ–æ¨™" class="app-icon">
                    <span>æ›¸å®¢ä¾† Facebookç²‰çµ²å°ˆé </span>
                </a>
                <a href="#" class="app-link">
                    <img src="#" alt="YouTubeåœ–æ¨™" class="app-icon">
                    <span>æ›¸å®¢ä¾† YouTube</span>
                </a>
                <a href="#" class="app-link">
                    <img src="#" alt="LINEåœ–æ¨™" class="app-icon">
                    <span>æ›¸å®¢ä¾† LINE å®˜æ–¹å¸³è™Ÿ</span>
                </a>
                <a href="#" class="app-link">
                    <span>ğŸ“± åˆ‡æ›è¡Œå‹•ç‰ˆ</span>
                </a>
            </div>
        </div>
        
        <div class="footer-content">
            <div class="footer-section">
                <h4>é—œæ–¼æˆ‘å€‘</h4>
                <ul>
                    <li><a href="#">é—œæ–¼æ›¸å®¢ä¾†</a></li>
                    <li><a href="#">äººæ‰å‹Ÿé›†</a></li>
                    <li><a href="#">åˆ©å®³é—œä¿‚äººå°ˆå€</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>ä¼æ¥­åˆä½œ</h4>
                <ul>
                    <li><a href="#">ä¼æ¥­æ¡è³¼</a></li>
                    <li><a href="#">ç¦åˆ©å¹³å°</a></li>
                    <li><a href="#">æˆç‚ºä¾›æ‡‰å•†</a></li>
                    <li><a href="#">ç•°æ¥­åˆä½œ</a></li>
                    <li><a href="#">å»£å‘ŠåˆŠç™»</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>å¥½ç«™é€£çµ</h4>
                <ul>
                    <li><a href="#">OKAPI é–±è®€ç”Ÿæ´»èªŒ</a></li>
                    <li><a href="#">é’æ˜¥æ›¸å®¢ä¾†</a></li>
                    <li><a href="#">é«˜ä¸­ç”Ÿæ›¸åº—</a></li>
                    <li><a href="#">å”®ç¥¨ç¶²</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>æœƒå“¡æœå‹™</h4>
                <ul>
                    <li><a href="#">æœƒå“¡å°ˆå€</a></li>
                    <li><a href="#">åŠ å…¥æœƒå“¡</a></li>
                    <li><a href="#">æœƒå“¡åˆ†ç´š</a></li>
                    <li><a href="#">æŸ¥è©¢å¸³è™Ÿå¯†ç¢¼</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>å®¢æœä¸­å¿ƒ</h4>
                <ul>
                    <li><a href="#">ğŸ” å¸¸è¦‹å•é¡Œ</a></li>
                    <li><a href="#">ğŸ“ ç·šä¸Šå®¢æœ</a></li>
                    <li><a href="#">âœ‰ï¸ å®¢æœä¿¡ç®±</a></li>
                    <li><span>ğŸ“… é€±ä¸€ï½äº” 08:00 - 19:00</span></li>
                    <li><span>é€±å…­ã€ä¾‹å‡æ—¥ç·šä¸Šå®¢æœ</span></li>
                    <li><span>09:00-12:30ï¼›13:30-18:00</span></li>
                </ul>
            </div>
        </div>
        
        <div class="footer-bottom">
            <div class="footer-info">
                <p>æ›¸å®¢ä¾†æ•¸ä½ç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸  çµ±ç·¨ï¼š96922355  åœ°å€ï¼šè‡ºç£ 115 å°åŒ—å¸‚å—æ¸¯å€å…«å¾·è·¯å››æ®µ768å··1å¼„18è™ŸB1ä¹‹1</p>
                <p>Copyright Â© since 1995 books.com.tw All Rights Reserved.</p>
            </div>
            <div class="footer-policies">
                <a href="#">è³‡è¨Šå®‰å…¨</a>
                <a href="#">æœå‹™æ¢æ¬¾</a>
                <a href="#">éš±ç§æ¬Šæ”¿ç­–</a>
            </div>
        </div>
    </footer>

    <!-- å³ä¸‹è§’æ‡¸æµ®æŒ‰éˆ• -->
    <div class="floating-buttons">
        <button class="float-btn customer-service" onclick="openCustomerService()" title="å®¢æœ">
            ğŸ’¬
        </button>
        <button class="float-btn back-to-top" onclick="backToTop()" title="å›åˆ°é ‚éƒ¨">
            â¬†ï¸
        </button>
    </div>

    <!-- Google Books API -->
    <script src="js/google-books.js"></script>
    <script>
        // æ›¸ç±è³‡æ–™ç®¡ç†å™¨
        class BookDataManager {
            constructor() {
                this.booksData = {
                    bestsellers: [],        // æœ¬é€±æš¢éŠ·
                    editorial: [],          // ç·¨è¼¯æ¨è–¦  
                    todayDeals: [],         // ä»Šæ—¥66æŠ˜
                    chineseBooks: [],       // ä¸­æ–‡å‡ºç‰ˆ
                    allBestsellers: [],     // å¿…è®€æš¢éŠ·æ¦œ
                    featured: [],           // é—œè®€æ³¨ç›®
                    business: [],           // å•†æ¥­ç†è²¡
                    psychology: [],         // å¿ƒç†å‹µå¿—
                    fiction: []             // å°èªª
                };
                this.isLoading = false;
                this.loadAttempts = 0;
                this.maxAttempts = 3;
            }

            // è¼‰å…¥æ‰€æœ‰åˆ†é¡çš„æ›¸ç±è³‡æ–™
            async loadAllBooks() {
                if (this.isLoading) return;
                
                this.isLoading = true;
                this.loadAttempts++;
                
                console.log(`ğŸš€ é–‹å§‹è¼‰å…¥æ‰€æœ‰æ›¸ç±è³‡æ–™ (å˜—è©¦ ${this.loadAttempts}/${this.maxAttempts})`);
                
                try {
                    // é¡¯ç¤ºè¼‰å…¥æŒ‡ç¤ºå™¨
                    this.showLoadingIndicator();
                    
                    // å®šç¾©å„å€åŸŸè¦è¼‰å…¥çš„æ›¸ç±é¡å‹å’Œæ•¸é‡
                    const loadTasks = [
                        { category: 'bestsellers', query: 'æš¢éŠ·æ›¸', count: 6 },
                        { category: 'editorial', query: 'æ–‡å­¸å°èªª', count: 6 },
                        { category: 'todayDeals', query: 'å•†æ¥­ç†è²¡', count: 8 },
                        { category: 'chineseBooks', query: 'å¿ƒç†å‹µå¿—', count: 8 },
                        { category: 'allBestsellers', query: 'ç§‘æ™®', count: 10 },
                        { category: 'featured', query: 'æ­·å²', count: 6 },
                        { category: 'business', query: 'æŠ•è³‡ç†è²¡', count: 6 },
                        { category: 'psychology', query: 'è‡ªæˆ‘æå‡', count: 6 },
                        { category: 'fiction', query: 'æ¨ç†å°èªª', count: 6 }
                    ];

                    // ä¸¦è¡Œè¼‰å…¥æ‰€æœ‰åˆ†é¡çš„æ›¸ç±
                    const results = await Promise.allSettled(
                        loadTasks.map(task => this.loadCategoryBooks(task.category, task.query, task.count))
                    );

                    // æª¢æŸ¥è¼‰å…¥çµæœ
                    let successCount = 0;
                    results.forEach((result, index) => {
                        if (result.status === 'fulfilled' && result.value > 0) {
                            successCount++;
                            console.log(`âœ… ${loadTasks[index].category}: ${result.value} æœ¬æ›¸`);
                        } else {
                            console.warn(`âš ï¸ ${loadTasks[index].category}: è¼‰å…¥å¤±æ•—`);
                        }
                    });

                    if (successCount === 0) {
                        throw new Error('æ‰€æœ‰åˆ†é¡è¼‰å…¥å¤±æ•—');
                    }

                    // æ›´æ–°é é¢é¡¯ç¤º
                    this.updateAllDisplays();
                    
                    // éš±è—è¼‰å…¥æŒ‡ç¤ºå™¨
                    this.hideLoadingIndicator();
                    
                    // é¡¯ç¤ºè¼‰å…¥æˆåŠŸé€šçŸ¥
                    this.showSuccessNotification(successCount, loadTasks.length);
                    
                    console.log(`ğŸ‰ è¼‰å…¥å®Œæˆ: ${successCount}/${loadTasks.length} å€‹åˆ†é¡æˆåŠŸ`);
                    
                } catch (error) {
                    console.error('âŒ è¼‰å…¥æ›¸ç±è³‡æ–™å¤±æ•—:', error);
                    
                    this.hideLoadingIndicator();
                    
                    // å¦‚æœé‚„æœ‰é‡è©¦æ©Ÿæœƒï¼Œç¨å¾Œé‡è©¦
                    if (this.loadAttempts < this.maxAttempts) {
                        console.log(`ğŸ”„ ${3}ç§’å¾Œé‡è©¦...`);
                        setTimeout(() => {
                            this.isLoading = false;
                            this.loadAllBooks();
                        }, 3000);
                        return;
                    }
                    
                    // ä½¿ç”¨å‚™ç”¨è³‡æ–™
                    this.loadFallbackData();
                    this.updateAllDisplays();
                    this.showErrorNotification();
                }
                
                this.isLoading = false;
            }

            // è¼‰å…¥ç‰¹å®šåˆ†é¡çš„æ›¸ç±
            async loadCategoryBooks(category, query, count) {
                try {
                    console.log(`ğŸ“š è¼‰å…¥ ${category}: "${query}"`);
                    const books = await window.googleBooksAPI.searchBooks(query, count);
                    
                    if (books && books.length > 0) {
                        this.booksData[category] = books;
                        return books.length;
                    } else {
                        // å¦‚æœæ²’æœ‰çµæœï¼Œå˜—è©¦æ›´é€šç”¨çš„æŸ¥è©¢
                        const fallbackQuery = this.getFallbackQuery(category);
                        const fallbackBooks = await window.googleBooksAPI.searchBooks(fallbackQuery, count);
                        this.booksData[category] = fallbackBooks || [];
                        return fallbackBooks ? fallbackBooks.length : 0;
                    }
                    
                } catch (error) {
                    console.error(`è¼‰å…¥ ${category} å¤±æ•—:`, error);
                    this.booksData[category] = [];
                    return 0;
                }
            }

            // ç²å–å‚™ç”¨æŸ¥è©¢é—œéµå­—
            getFallbackQuery(category) {
                const fallbackMap = {
                    bestsellers: 'ç†±é–€',
                    editorial: 'æ–‡å­¸',
                    todayDeals: 'å•†æ¥­',
                    chineseBooks: 'å¿ƒç†',
                    allBestsellers: 'ç§‘å­¸',
                    featured: 'æ­·å²',
                    business: 'ç¶“æ¿Ÿ',
                    psychology: 'å‹µå¿—',
                    fiction: 'å°èªª'
                };
                return fallbackMap[category] || 'æ›¸ç±';
            }

            // è¼‰å…¥å‚™ç”¨è³‡æ–™
            loadFallbackData() {
                console.log('ğŸ“– è¼‰å…¥å‚™ç”¨æ›¸ç±è³‡æ–™');
                
                const fallbackBook = (id, title, price, category) => ({
                    id: `fallback_${id}`,
                    title: title,
                    author: 'çŸ¥åä½œè€…',
                    currentPrice: price,
                    originalPrice: Math.floor(price * 1.3),
                    discountRate: '79æŠ˜',
                    imageUrl: `https://via.placeholder.com/200x280/4CAF50/ffffff?text=${encodeURIComponent(title.substring(0, 6))}`,
                    categories: [category],
                    rating: (Math.random() * 2 + 3).toFixed(1),
                    reviewCount: Math.floor(Math.random() * 100) + 20,
                    description: `é€™æ˜¯ä¸€æœ¬é—œæ–¼ ${category} çš„å„ªç§€æ›¸ç±ã€‚`,
                    source: 'fallback'
                });

                // ç‚ºæ¯å€‹åˆ†é¡å‰µå»ºå‚™ç”¨æ›¸ç±
                this.booksData.bestsellers = [
                    fallbackBook(1, 'ç†±é–€æš¢éŠ·æ›¸ç±', 299, 'æš¢éŠ·æ›¸'),
                    fallbackBook(2, 'ç¶“å…¸æ–‡å­¸ä½œå“', 350, 'æ–‡å­¸'),
                    fallbackBook(3, 'å¯¦ç”¨ç”Ÿæ´»æŒ‡å—', 280, 'ç”Ÿæ´»')
                ];

                this.booksData.editorial = [
                    fallbackBook(4, 'ç·¨è¼¯ç²¾é¸å¥½æ›¸', 320, 'ç²¾é¸'),
                    fallbackBook(5, 'å¿…è®€ç¶“å…¸ä½œå“', 380, 'ç¶“å…¸'),
                    fallbackBook(6, 'æ–°éŠ³ä½œå®¶ä½œå“', 260, 'æ–°æ›¸')
                ];

                this.booksData.todayDeals = [
                    fallbackBook(7, 'ä»Šæ—¥ç‰¹åƒ¹æ›¸ç±', 199, 'ç‰¹åƒ¹'),
                    fallbackBook(8, 'é™æ™‚å„ªæƒ ç²¾é¸', 250, 'å„ªæƒ '),
                    fallbackBook(9, 'è¶…å€¼æ¨è–¦æ›¸ç›®', 180, 'æ¨è–¦')
                ];

                // ç‚ºå…¶ä»–åˆ†é¡ä¹Ÿå‰µå»ºé¡ä¼¼çš„å‚™ç”¨è³‡æ–™
                Object.keys(this.booksData).forEach(category => {
                    if (this.booksData[category].length === 0) {
                        this.booksData[category] = [
                            fallbackBook(`${category}_1`, `${category}ç²¾é¸`, 299, category),
                            fallbackBook(`${category}_2`, `${category}æ¨è–¦`, 350, category),
                            fallbackBook(`${category}_3`, `${category}å¿…è®€`, 280, category)
                        ];
                    }
                });
            }

            // æ›´æ–°æ‰€æœ‰æ›¸ç±é¡¯ç¤ºå€åŸŸ
            updateAllDisplays() {
                try {
                    console.log('ğŸ¨ æ›´æ–°æ‰€æœ‰æ›¸ç±é¡¯ç¤ºå€åŸŸ');
                    
                    // æ›´æ–°ä¸»è¦æ¨è–¦å€åŸŸ
                    this.updateMainRecommendations();
                    
                    // æ›´æ–°æ©«å‘æ²å‹•å€åŸŸ
                    this.updateHorizontalSections();
                    
                    // ç‚ºæ‰€æœ‰æ›¸ç±æ·»åŠ äº‹ä»¶ç›£è½å™¨
                    this.attachEventListeners();
                    
                    console.log('âœ… æ‰€æœ‰é¡¯ç¤ºå€åŸŸæ›´æ–°å®Œæˆ');
                    
                } catch (error) {
                    console.error('âŒ æ›´æ–°é¡¯ç¤ºå¤±æ•—:', error);
                }
            }

            // æ›´æ–°ä¸»è¦æ¨è–¦å€åŸŸ
            updateMainRecommendations() {
                // æ›´æ–°æœ¬é€±æš¢éŠ·
                this.updateBookGrid('bestsellers', this.booksData.bestsellers.slice(0, 3));
                
                // æ›´æ–°ç·¨è¼¯æ¨è–¦
                this.updateBookGrid('editorial', this.booksData.editorial.slice(0, 3));
            }

            // æ›´æ–°æ›¸ç±ç¶²æ ¼
            updateBookGrid(sectionType, books) {
                const sectionTitles = {
                    bestsellers: 'æœ¬é€±æš¢éŠ·',
                    editorial: 'ç·¨è¼¯æ¨è–¦'
                };
                
                // æ‰¾åˆ°å°æ‡‰çš„å€åŸŸ
                const sections = document.querySelectorAll('.book-section');
                let targetSection = null;
                
                sections.forEach(section => {
                    const titleElement = section.querySelector('.section-title');
                    if (titleElement && titleElement.textContent === sectionTitles[sectionType]) {
                        targetSection = section;
                    }
                });
                
                if (!targetSection) return;
                
                const bookGrid = targetSection.querySelector('.book-grid');
                if (!bookGrid) return;
                
                // æ¸…ç©ºç¾æœ‰å…§å®¹
                bookGrid.innerHTML = '';
                
                // æ·»åŠ æ–°çš„æ›¸ç±é …ç›®
                books.forEach(book => {
                    const bookItem = this.createBookItem(book);
                    bookGrid.appendChild(bookItem);
                });
            }

            // å‰µå»ºæ›¸ç±é …ç›®å…ƒç´ 
            createBookItem(book) {
                const bookItem = document.createElement('div');
                bookItem.className = 'book-item';
                bookItem.style.cursor = 'pointer';
                
                const price = typeof book.currentPrice === 'number' ? 
                    `$${book.currentPrice}` : 
                    (book.currentPrice || '$299');
                    
                const originalPrice = book.originalPrice ? 
                    `<span style="color: #999; text-decoration: line-through; font-size: 12px; margin-left: 5px;">$${book.originalPrice}</span>` : 
                    '';
                
                bookItem.innerHTML = `
                    <div class="book-cover" style="background-image: url('${book.imageUrl}'); background-size: cover; background-position: center; position: relative;">
                        ${book.imageUrl.includes('placeholder') ? 
                            `<div style="position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; background: rgba(76, 175, 80, 0.1); color: #4CAF50; font-size: 11px; text-align: center; padding: 5px;">${book.title.substring(0, 10)}...</div>` : 
                            ''
                        }
                    </div>
                    <div class="book-title" title="${book.title}">${book.title.length > 20 ? book.title.substring(0, 20) + '...' : book.title}</div>
                    <div class="book-price">
                        <span style="color: #e74c3c; font-weight: bold;">${price}</span>
                        ${originalPrice}
                    </div>
                    <button class="add-to-cart-btn" style="
                        width: 100%;
                        background-color: #4CAF50;
                        color: white;
                        border: none;
                        padding: 8px;
                        border-radius: 4px;
                        cursor: pointer;
                        margin-top: 8px;
                        font-size: 12px;
                        transition: background-color 0.3s;
                    ">åŠ å…¥è³¼ç‰©è»Š</button>
                `;
                
                // æ·»åŠ äº‹ä»¶ç›£è½å™¨
                bookItem.addEventListener('click', (e) => {
                    if (!e.target.closest('.add-to-cart-btn')) {
                        this.navigateToProduct(book);
                    }
                });
                
                const addToCartBtn = bookItem.querySelector('.add-to-cart-btn');
                addToCartBtn.addEventListener('mouseenter', function() {
                    this.style.backgroundColor = '#45a049';
                });
                addToCartBtn.addEventListener('mouseleave', function() {
                    this.style.backgroundColor = '#4CAF50';
                });
                addToCartBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    this.addToCart(book);
                });
                
                return bookItem;
            }

            // æ›´æ–°æ©«å‘æ²å‹•å€åŸŸ
            updateHorizontalSections() {
                // æ›´æ–°ä»Šæ—¥66æŠ˜
                this.updateTodayDeals();
                
                // æ›´æ–°ä¸­æ–‡å‡ºç‰ˆæ¨è–¦
                this.updateChineseBooks();
                
                // æ›´æ–°å¿…è®€æš¢éŠ·æ¦œ
                this.updateBestsellerRanking();
            }

            // æ›´æ–°ä»Šæ—¥66æŠ˜å€åŸŸ
            updateTodayDeals() {
                const container = document.getElementById('today-deals');
                if (!container) return;
                
                container.innerHTML = '';
                
                const books = this.booksData.todayDeals.slice(0, 6);
                books.forEach(book => {
                    const bookCard = this.createDealCard(book);
                    container.appendChild(bookCard);
                });
            }

            // å‰µå»ºç‰¹åƒ¹æ›¸ç±å¡ç‰‡
            createDealCard(book) {
                const bookCard = document.createElement('div');
                bookCard.className = 'book-card deal-card';
                bookCard.style.cursor = 'pointer';
                
                const currentPrice = typeof book.currentPrice === 'number' ? book.currentPrice : 299;
                const originalPrice = book.originalPrice || Math.floor(currentPrice * 1.5);
                const discountRate = book.discountRate || '66æŠ˜';
                
                bookCard.innerHTML = `
                    <div class="book-image" style="background-image: url('${book.imageUrl}'); background-size: cover; background-position: center;">
                        ${book.imageUrl.includes('placeholder') ? book.title.substring(0, 6) : ''}
                    </div>
                    <div class="book-info">
                        <div class="book-title" title="${book.title}">${book.title.length > 25 ? book.title.substring(0, 25) + '...' : book.title}</div>
                        <div class="book-price">
                            <span class="current-price">$${currentPrice}</span>
                            <span class="original-price">$${originalPrice}</span>
                            <span class="discount-badge">${discountRate}</span>
                        </div>
                    </div>
                    <button class="quick-buy-btn" style="
                        position: absolute;
                        bottom: 10px;
                        right: 10px;
                        width: 30px;
                        height: 30px;
                        background-color: #4CAF50;
                        color: white;
                        border: none;
                        border-radius: 50%;
                        cursor: pointer;
                        font-size: 14px;
                        transition: all 0.3s;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                    " title="åŠ å…¥è³¼ç‰©è»Š">ğŸ›’</button>
                `;
                
                // æ·»åŠ äº‹ä»¶ç›£è½å™¨
                bookCard.addEventListener('click', (e) => {
                    if (!e.target.closest('.quick-buy-btn')) {
                        this.navigateToProduct(book);
                    }
                });
                
                const quickBuyBtn = bookCard.querySelector('.quick-buy-btn');
                quickBuyBtn.addEventListener('mouseenter', function() {
                    this.style.transform = 'scale(1.1)';
                    this.style.backgroundColor = '#45a049';
                });
                quickBuyBtn.addEventListener('mouseleave', function() {
                    this.style.transform = 'scale(1)';
                    this.style.backgroundColor = '#4CAF50';
                });
                quickBuyBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    this.addToCart(book);
                });
                
                return bookCard;
            }

            // æ›´æ–°ä¸­æ–‡å‡ºç‰ˆæ¨è–¦
            updateChineseBooks() {
                const container = document.getElementById('chinese-books');
                if (!container) return;
                
                container.innerHTML = '';
                
                const books = this.booksData.chineseBooks.slice(0, 6);
                books.forEach(book => {
                    const bookCard = this.createRegularCard(book);
                    container.appendChild(bookCard);
                });
            }

            // æ›´æ–°å¿…è®€æš¢éŠ·æ¦œ
            updateBestsellerRanking() {
                const container = document.getElementById('bestseller-books');
                if (!container) return;
                
                container.innerHTML = '';
                
                const books = this.booksData.allBestsellers.slice(0, 6);
                books.forEach((book, index) => {
                    const bookCard = this.createRankingCard(book, index + 1);
                    container.appendChild(bookCard);
                });
            }

            // å‰µå»ºä¸€èˆ¬æ›¸ç±å¡ç‰‡
            createRegularCard(book) {
                const bookCard = document.createElement('div');
                bookCard.className = 'book-card';
                bookCard.style.cursor = 'pointer';
                
                const price = typeof book.currentPrice === 'number' ? book.currentPrice : 299;
                const discountRate = book.discountRate || '79æŠ˜';
                
                bookCard.innerHTML = `
                    <div class="discount-label">${discountRate}</div>
                    <div class="book-image" style="background-image: url('${book.imageUrl}'); background-size: cover; background-position: center;">
                        ${book.imageUrl.includes('placeholder') ? book.title.substring(0, 6) : ''}
                    </div>
                    <div class="book-info">
                        <div class="book-title" title="${book.title}">${book.title.length > 30 ? book.title.substring(0, 30) + '...' : book.title}</div>
                        <div class="book-price">
                            <span class="current-price">$${price}</span>
                        </div>
                    </div>
                `;
                
                // æ·»åŠ é»æ“Šäº‹ä»¶
                bookCard.addEventListener('click', () => {
                    this.navigateToProduct(book);
                });
                
                return bookCard;
            }

            // å‰µå»ºæ’è¡Œæ¦œæ›¸ç±å¡ç‰‡
            createRankingCard(book, ranking) {
                const bookCard = document.createElement('div');
                bookCard.className = 'book-card bestseller-card';
                bookCard.style.cursor = 'pointer';
                
                const price = typeof book.currentPrice === 'number' ? book.currentPrice : 299;
                const discountRate = book.discountRate || '79æŠ˜';
                
                bookCard.innerHTML = `
                    <div class="ranking-number">${ranking}</div>
                    <div class="discount-label">${discountRate}</div>
                    <div class="book-image" style="background-image: url('${book.imageUrl}'); background-size: cover; background-position: center;">
                        ${book.imageUrl.includes('placeholder') ? book.title.substring(0, 6) : ''}
                    </div>
                    <div class="book-info">
                        <div class="book-title" title="${book.title}">${book.title.length > 25 ? book.title.substring(0, 25) + '...' : book.title}</div>
                        <div class="book-price">
                            <span class="current-price">$${price}</span>
                        </div>
                    </div>
                `;
                
                // æ·»åŠ é»æ“Šäº‹ä»¶
                bookCard.addEventListener('click', () => {
                    this.navigateToProduct(book);
                });
                
                return bookCard;
            }

            // è·³è½‰åˆ°å•†å“è©³æƒ…é é¢
            navigateToProduct(book) {
                console.log('ğŸ”— è·³è½‰åˆ°å•†å“é é¢:', book.title);
                
                try {
                    // ä¿å­˜æ›¸ç±è³‡æ–™åˆ° sessionStorage
                    sessionStorage.setItem('currentProduct', JSON.stringify(book));
                    sessionStorage.setItem('referrerPage', 'homepage');
                    
                    // è·³è½‰åˆ°å•†å“è©³æƒ…é é¢
                    window.location.href = `product.html?id=${book.id}`;
                    
                } catch (error) {
                    console.error('è·³è½‰å¤±æ•—:', error);
                    alert('é é¢è·³è½‰å¤±æ•—ï¼Œè«‹é‡è©¦');
                }
            }

            // åŠ å…¥è³¼ç‰©è»Š
            addToCart(book) {
                console.log('ğŸ›’ åŠ å…¥è³¼ç‰©è»Š:', book.title);
                
                try {
                    let cartItems = JSON.parse(localStorage.getItem('cartItems') || '[]');
                    
                    const existingItem = cartItems.find(item => item.id === book.id);
                    
                    if (existingItem) {
                        existingItem.quantity += 1;
                    } else {
                        cartItems.push({
                            id: book.id,
                            title: book.title,
                            price: book.currentPrice || 299,
                            originalPrice: book.originalPrice,
                            note: book.note || 'ä¾†è‡ªé¦–é æ¨è–¦',
                            quantity: 1,
                            stock: 'æœ‰',
                            selected: true
                        });
                    }
                    
                    localStorage.setItem('cartItems', JSON.stringify(cartItems));
                    
                    // æ›´æ–°è³¼ç‰©è»Šæ•¸é‡é¡¯ç¤º
                    this.updateCartDisplay();
                    
                    // é¡¯ç¤ºæˆåŠŸè¨Šæ¯
                    this.showAddToCartMessage(book.title);
                    
                } catch (error) {
                    console.error('åŠ å…¥è³¼ç‰©è»Šå¤±æ•—:', error);
                    alert('åŠ å…¥è³¼ç‰©è»Šå¤±æ•—ï¼Œè«‹é‡è©¦');
                }
            }

            // æ›´æ–°è³¼ç‰©è»Šæ•¸é‡é¡¯ç¤º
            updateCartDisplay() {
                const cartItems = JSON.parse(localStorage.getItem('cartItems') || '[]');
                const cartCount = cartItems.reduce((total, item) => total + item.quantity, 0);
                const cartCountElement = document.getElementById('cartCount');
                if (cartCountElement) {
                    cartCountElement.textContent = cartCount;
                }
            }

            // é¡¯ç¤ºåŠ å…¥è³¼ç‰©è»ŠæˆåŠŸè¨Šæ¯
            showAddToCartMessage(bookTitle) {
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background-color: #4CAF50;
                    color: white;
                    padding: 15px 20px;
                    border-radius: 5px;
                    z-index: 1000;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                    max-width: 300px;
                    font-size: 14px;
                `;
                notification.innerHTML = `
                    <strong>âœ… å·²åŠ å…¥è³¼ç‰©è»Š</strong><br>
                    ${bookTitle}
                    <div style="margin-top: 8px;">
                        <button onclick="this.parentElement.parentElement.remove()" 
                                style="background: none; border: 1px solid white; color: white; padding: 4px 8px; border-radius: 3px; cursor: pointer; margin-right: 8px;">
                            é—œé–‰
                        </button>
                        <button onclick="window.location.href='shopping.html'" 
                                style="background: white; border: none; color: #4CAF50; padding: 4px 8px; border-radius: 3px; cursor: pointer;">
                            æŸ¥çœ‹è³¼ç‰©è»Š
                        </button>
                    </div>
                `;
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.remove();
                    }
                }, 3000);
            }

            // ç‚ºæ¨™ç±¤åˆ‡æ›åŠŸèƒ½æ·»åŠ çœŸå¯¦æ›¸ç±è¼‰å…¥
            async switchTab(tabType, element) {
                // ç§»é™¤åŒç´šåˆ¥çš„active class
                const parentTabs = element.parentElement;
                parentTabs.querySelectorAll('.tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                
                // æ·»åŠ active classåˆ°ç•¶å‰æ¨™ç±¤
                element.classList.add('active');
                
                console.log(`ğŸ”„ åˆ‡æ›åˆ°æ¨™ç±¤: ${tabType}`);
                
                // æ ¹æ“šæ¨™ç±¤é¡å‹è¼‰å…¥å°æ‡‰çš„æ›¸ç±
                await this.loadTabBooks(tabType);
            }

            // æ ¹æ“šæ¨™ç±¤è¼‰å…¥æ›¸ç±
            async loadTabBooks(tabType) {
                const tabQueries = {
                    'chinese': 'ä¸­æ–‡æ›¸',
                    'featured': 'æ¨è–¦æ›¸',
                    'blogger': 'åšå®¢ä¾†',
                    'bestseller': 'æš¢éŠ·æ›¸',
                    'business': 'å•†æ¥­ç†è²¡',
                    'humanities': 'äººæ–‡è—è¡“',
                    'psychology': 'å¿ƒç†å‹µå¿—',
                    'fiction': 'å°èªªæ¼«ç•«',
                    'bestseller-all': 'å…¨ç«™æš¢éŠ·',
                    'bestseller-chinese': 'ä¸­æ–‡æš¢éŠ·',
                    'bestseller-ebook': 'é›»å­æ›¸',
                    'bestseller-audio': 'æœ‰è²æ›¸'
                };
                
                const query = tabQueries[tabType] || 'æ¨è–¦æ›¸';
                
                try {
                    console.log(`ğŸ“š è¼‰å…¥æ¨™ç±¤æ›¸ç±: ${query}`);
                    const books = await window.googleBooksAPI.searchBooks(query, 8);
                    
                    if (books && books.length > 0) {
                        // æ ¹æ“šæ¨™ç±¤é¡å‹æ›´æ–°å°æ‡‰çš„å®¹å™¨
                        if (tabType.startsWith('bestseller-')) {
                            this.updateBestsellerContainer(books);
                        } else {
                            this.updateChineseBooksContainer(books);
                        }
                    }
                    
                } catch (error) {
                    console.error(`è¼‰å…¥æ¨™ç±¤ ${tabType} å¤±æ•—:`, error);
                }
            }

            // æ›´æ–°ä¸­æ–‡æ›¸å®¹å™¨
            updateChineseBooksContainer(books) {
                const container = document.getElementById('chinese-books');
                if (!container) return;
                
                container.innerHTML = '';
                books.slice(0, 6).forEach(book => {
                    const bookCard = this.createRegularCard(book);
                    container.appendChild(bookCard);
                });
            }

            // æ›´æ–°æš¢éŠ·æ¦œå®¹å™¨
            updateBestsellerContainer(books) {
                const container = document.getElementById('bestseller-books');
                if (!container) return;
                
                container.innerHTML = '';
                books.slice(0, 6).forEach((book, index) => {
                    const bookCard = this.createRankingCard(book, index + 1);
                    container.appendChild(bookCard);
                });
            }

            // é™„åŠ äº‹ä»¶ç›£è½å™¨
            attachEventListeners() {
                // ç‚ºæ¨™ç±¤åˆ‡æ›æ·»åŠ äº‹ä»¶ç›£è½å™¨
                document.querySelectorAll('.tab').forEach(tab => {
                    tab.addEventListener('click', (e) => {
                        const tabType = e.target.textContent.trim();
                        const tabTypeMap = {
                            'ä¸­æ–‡å‡ºç‰ˆ': 'chinese',
                            'é—œè®€æ³¨ç›®': 'featured',
                            'åšå®¢ä¾†é¸æ›¸': 'blogger',
                            'ç†±éŠ·æ–°æ›¸': 'bestseller',
                            'å•†æ¥­ç†è²¡': 'business',
                            'äººæ–‡è—è¡“': 'humanities',
                            'å¿ƒç†å‹µå¿—': 'psychology',
                            'å°èªªâ€§æ¼«ç•«': 'fiction',
                            'å…¨ç«™': 'bestseller-all',
                            'ä¸­æ–‡æ›¸': 'bestseller-chinese',
                            'é›»å­æ›¸': 'bestseller-ebook',
                            'æœ‰è²æ›¸': 'bestseller-audio'
                        };
                        
                        const mappedType = tabTypeMap[tabType] || 'featured';
                        this.switchTab(mappedType, e.target);
                    });
                });
            }

            // é¡¯ç¤ºè¼‰å…¥æŒ‡ç¤ºå™¨
            showLoadingIndicator() {
                if (document.getElementById('homepageLoadingIndicator')) return;
                
                const indicator = document.createElement('div');
                indicator.id = 'homepageLoadingIndicator';
                indicator.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background-color: rgba(255, 255, 255, 0.95);
                    padding: 30px;
                    border-radius: 12px;
                    box-shadow: 0 8px 24px rgba(0,0,0,0.3);
                    z-index: 1000;
                    text-align: center;
                `;
                
                indicator.innerHTML = `
                    <div style="width: 50px; height: 50px; border: 5px solid #f3f3f3; border-top: 5px solid #4CAF50; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 15px;"></div>
                    <p style="color: #666; font-size: 16px; margin: 0;">æ­£åœ¨è¼‰å…¥æ›¸ç±è³‡æ–™...</p>
                    <p style="color: #999; font-size: 12px; margin: 5px 0 0 0;">é¦–æ¬¡è¼‰å…¥å¯èƒ½éœ€è¦è¼ƒé•·æ™‚é–“</p>
                `;
                
                document.body.appendChild(indicator);
            }

            // éš±è—è¼‰å…¥æŒ‡ç¤ºå™¨
            hideLoadingIndicator() {
                const indicator = document.getElementById('homepageLoadingIndicator');
                if (indicator) {
                    indicator.remove();
                }
            }

            // é¡¯ç¤ºè¼‰å…¥æˆåŠŸé€šçŸ¥
            showSuccessNotification(successCount, totalCount) {
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background-color: #4CAF50;
                    color: white;
                    padding: 15px 20px;
                    border-radius: 5px;
                    z-index: 1000;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                    font-size: 14px;
                `;
                notification.textContent = `âœ… æ›¸ç±è¼‰å…¥å®Œæˆï¼æˆåŠŸè¼‰å…¥ ${successCount}/${totalCount} å€‹åˆ†é¡`;
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.remove();
                    }
                }, 3000);
            }

            // é¡¯ç¤ºè¼‰å…¥å¤±æ•—é€šçŸ¥
            showErrorNotification() {
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background-color: #ff9800;
                    color: white;
                    padding: 15px 20px;
                    border-radius: 5px;
                    z-index: 1000;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                    font-size: 14px;
                `;
                notification.innerHTML = `
                    âš ï¸ API è¼‰å…¥å¤±æ•—ï¼Œä½¿ç”¨ç¯„ä¾‹è³‡æ–™<br>
                    <small>è«‹æª¢æŸ¥ç¶²è·¯é€£ç·šæˆ–ç¨å¾Œé‡è©¦</small>
                `;
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.remove();
                    }
                }, 4000);
            }
        }

        // å‰µå»ºå…¨åŸŸæ›¸ç±è³‡æ–™ç®¡ç†å™¨å¯¦ä¾‹
        window.bookManager = new BookDataManager();

        // æœå°‹åŠŸèƒ½å¢å¼·ç‰ˆ
        async function performSearch() {
            const category = document.getElementById('searchCategory').value;
            const keyword = document.getElementById('searchInput').value.trim();
            
            if (keyword === '') {
                alert('è«‹è¼¸å…¥æœå°‹é—œéµå­—');
                document.getElementById('searchInput').focus();
                return;
            }
            
            // é¡¯ç¤ºæœå°‹ä¸­ç‹€æ…‹
            const searchBtn = document.querySelector('.search-btn');
            const originalText = searchBtn.textContent;
            searchBtn.textContent = 'æœå°‹ä¸­...';
            searchBtn.disabled = true;
            
            try {
                console.log(`ğŸ” åŸ·è¡Œæœå°‹: ${category} - ${keyword}`);
                
                // å…ˆå¿«é€Ÿæª¢æŸ¥æ˜¯å¦èƒ½ç²å–åˆ°çµæœ
                const testResults = await window.googleBooksAPI.searchBooks(keyword, 3);
                
                if (testResults && testResults.length > 0) {
                    console.log(`âœ… æ‰¾åˆ° ${testResults.length} å€‹çµæœï¼Œè·³è½‰åˆ°æœå°‹é é¢`);
                    
                    // é å…ˆä¿å­˜æœå°‹çµæœåˆ° sessionStorage
                    sessionStorage.setItem('lastSearchResults', JSON.stringify(testResults));
                    sessionStorage.setItem('lastSearchQuery', keyword);
                    sessionStorage.setItem('lastSearchCategory', category);
                    
                    // è·³è½‰åˆ°æœå°‹çµæœé é¢
                    const searchUrl = `search-results.html?q=${encodeURIComponent(keyword)}&category=${encodeURIComponent(category)}`;
                    window.location.href = searchUrl;
                } else {
                    // æ²’æœ‰æ‰¾åˆ°çµæœï¼Œä½†ä»ç„¶è·³è½‰ï¼ˆæœå°‹é é¢æœƒè™•ç†ç„¡çµæœçš„æƒ…æ³ï¼‰
                    console.log('âš ï¸ æ²’æœ‰æ‰¾åˆ°çµæœï¼Œä½†ä»è·³è½‰åˆ°æœå°‹é é¢');
                    const searchUrl = `search-results.html?q=${encodeURIComponent(keyword)}&category=${encodeURIComponent(category)}`;
                    window.location.href = searchUrl;
                }
                
            } catch (error) {
                console.error('âŒ æœå°‹å¤±æ•—:', error);
                
                // å³ä½¿æœå°‹å¤±æ•—ä¹Ÿè·³è½‰ï¼Œè®“æœå°‹é é¢è™•ç†éŒ¯èª¤
                const searchUrl = `search-results.html?q=${encodeURIComponent(keyword)}&category=${encodeURIComponent(category)}`;
                window.location.href = searchUrl;
            } finally {
                // æ¢å¾©æŒ‰éˆ•ç‹€æ…‹ï¼ˆé›–ç„¶é é¢æœƒè·³è½‰ï¼Œä½†ä»¥é˜²è¬ä¸€ï¼‰
                setTimeout(() => {
                    searchBtn.textContent = originalText;
                    searchBtn.disabled = false;
                }, 100);
            }
        }

        // å¿«é€Ÿæœå°‹åŠŸèƒ½ï¼ˆä¾›æ¨™ç±¤ä½¿ç”¨ï¼‰
        function quickSearch(keyword) {
            document.getElementById('searchInput').value = keyword;
            document.getElementById('searchCategory').value = 'all';
            performSearch();
        }

        // ç™»å…¥ç‹€æ…‹æª¢æŸ¥å’Œæ›´æ–°
        function checkAndUpdateLoginStatus() {
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            const userEmail = localStorage.getItem('userEmail');
            
            const loginLinks = document.querySelectorAll('.nav-right a');
            let loginLink = null;
            
            // æ‰¾åˆ°ç™»å…¥é€£çµ
            loginLinks.forEach(link => {
                if (link.textContent.includes('æœƒå“¡ç™»å…¥') || link.textContent.includes('æ­¡è¿')) {
                    loginLink = link;
                }
            });
            
            if (!loginLink) return;
            
            if (isLoggedIn === 'true' && userEmail) {
                const displayName = userEmail.split('@')[0];
                loginLink.textContent = `æ­¡è¿ï¼Œ${displayName}`;
                loginLink.onclick = function(e) {
                    e.preventDefault();
                    showUserMenu();
                };
                loginLink.style.color = '#4CAF50';
                loginLink.style.fontWeight = 'bold';
            } else {
                loginLink.textContent = 'æœƒå“¡ç™»å…¥';
                loginLink.onclick = function(e) {
                    e.preventDefault();
                    showLogin();
                };
                loginLink.style.color = '';
                loginLink.style.fontWeight = '';
            }
        }

        // é¡¯ç¤ºç”¨æˆ¶é¸å–®
        function showUserMenu() {
            const existingMenu = document.getElementById('userDropdownMenu');
            if (existingMenu) {
                existingMenu.remove();
                return;
            }
            
            const menu = document.createElement('div');
            menu.id = 'userDropdownMenu';
            menu.style.cssText = `
                position: absolute;
                top: 100%;
                right: 0;
                background: white;
                border: 1px solid #ddd;
                border-radius: 4px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.1);
                z-index: 1000;
                min-width: 150px;
            `;
            
            const userEmail = localStorage.getItem('userEmail');
            
            menu.innerHTML = `
                <div style="padding: 10px; border-bottom: 1px solid #eee; font-size: 12px; color: #666;">
                    ${userEmail}
                </div>
                <a href="#" onclick="showOrders(); closeUserMenu();" style="display: block; padding: 10px; text-decoration: none; color: #333; border-bottom: 1px solid #eee;">è¨‚å–®æŸ¥è©¢</a>
                <a href="shopping.html" onclick="closeUserMenu();" style="display: block; padding: 10px; text-decoration: none; color: #333; border-bottom: 1px solid #eee;">è³¼ç‰©è»Š</a>
                <a href="#" onclick="logout(); closeUserMenu();" style="display: block; padding: 10px; text-decoration: none; color: #e74c3c;">ç™»å‡º</a>
            `;
            
            // æ‰¾åˆ°å°èˆªå€åŸŸä¸¦æ·»åŠ é¸å–®
            const navRight = document.querySelector('.nav-right');
            if (navRight) {
                const loginLink = navRight.querySelector('a[onclick*="showLogin"], a[onclick*="showUserMenu"]');
                if (loginLink) {
                    loginLink.style.position = 'relative';
                    loginLink.appendChild(menu);
                }
            }
            
            // é»æ“Šå…¶ä»–åœ°æ–¹é—œé–‰é¸å–®
            setTimeout(() => {
                document.addEventListener('click', function closeMenuOnClickOutside(e) {
                    if (!menu.contains(e.target)) {
                        menu.remove();
                        document.removeEventListener('click', closeMenuOnClickOutside);
                    }
                });
            }, 100);
        }

        // é—œé–‰ç”¨æˆ¶é¸å–®
        function closeUserMenu() {
            const menu = document.getElementById('userDropdownMenu');
            if (menu) {
                menu.remove();
            }
        }

        // ç™»å‡ºåŠŸèƒ½
        function logout() {
            if (confirm('ç¢ºå®šè¦ç™»å‡ºå—ï¼Ÿ')) {
                localStorage.removeItem('isLoggedIn');
                localStorage.removeItem('userEmail');
                localStorage.removeItem('loginTime');
                
                // é¡¯ç¤ºç™»å‡ºæˆåŠŸè¨Šæ¯
                showNotification('âœ… å·²æˆåŠŸç™»å‡º', 'success');
                
                // æ›´æ–°ç™»å…¥ç‹€æ…‹é¡¯ç¤º
                checkAndUpdateLoginStatus();
            }
        }

        // å°èˆªåŠŸèƒ½å¢å¼·
        function goHome() {
            window.location.href = 'index.html';
        }

        function showNewReleases() {
            // åŸ·è¡Œæ–°æ›¸æ¨è–¦æœå°‹
            document.getElementById('searchInput').value = 'æ–°æ›¸';
            document.getElementById('searchCategory').value = 'all';
            performSearch();
        }

        function showBestsellers() {
            // åŸ·è¡Œæš¢éŠ·æ›¸æœå°‹
            document.getElementById('searchInput').value = 'æš¢éŠ·æ›¸';
            document.getElementById('searchCategory').value = 'all';
            performSearch();
        }

        function showEbooks() {
            // åŸ·è¡Œé›»å­æ›¸æœå°‹
            document.getElementById('searchInput').value = 'é›»å­æ›¸';
            document.getElementById('searchCategory').value = 'ebook';
            performSearch();
        }

        function showLogin() {
            window.location.href = 'login.html';
        }

        function showOrders() {
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            if (isLoggedIn !== 'true') {
                window.location.href = 'login.html?redirect=ordersearch.html';
                return;
            }
            window.location.href = 'ordersearch.html';
        }

        function showCart() {
            window.location.href = 'shopping.html';
        }

        function toggleLanguage() {
            showNotification('ğŸŒ èªè¨€åˆ‡æ›åŠŸèƒ½é–‹ç™¼ä¸­', 'info');
        }

        // åˆ†é¡å°èˆªåŠŸèƒ½
        function showCategory(category) {
            console.log(`ğŸ“‚ é¡¯ç¤ºåˆ†é¡: ${category}`);
            
            const categoryQueries = {
                'featured': 'ç‰¹è‰²æ›¸å±•',
                'chinese': 'ä¸­æ–‡æ›¸',
                'simplified': 'ç°¡é«”æ›¸',
                'english': 'å¤–æ–‡æ›¸',
                'ebook': 'é›»å­æ›¸',
                'audiobook': 'æœ‰è²æ›¸',
                'subscription': 'è¨‚é–±',
                'magazine': 'é›œèªŒ',
                'japanese': 'æ—¥æ–‡æ›¸',
                'textbook': 'æ•™ç§‘æ›¸',
                'reference': 'åƒè€ƒæ›¸'
            };
            
            const query = categoryQueries[category] || category;
            
            // åŸ·è¡Œåˆ†é¡æœå°‹
            document.getElementById('searchInput').value = query;
            document.getElementById('searchCategory').value = category === 'chinese' ? 'chinese' : 'all';
            performSearch();
        }

        // æ´»å‹•åŠŸèƒ½
        function showActivity(type) {
            console.log(`ğŸ¯ é¡¯ç¤ºæ´»å‹•: ${type}`);
            
            const activityActions = {
                'reading': () => showNotification('ğŸ“– å¥½è®€æ´»å‹•é é¢é–‹ç™¼ä¸­', 'info'),
                'member': () => showNotification('ğŸ¯ æœƒå“¡å°ˆå±¬å„ªæƒ é é¢é–‹ç™¼ä¸­', 'info'),
                'checkin': () => {
                    // æ¨¡æ“¬ç°½åˆ°åŠŸèƒ½
                    const lastCheckin = localStorage.getItem('lastCheckin');
                    const today = new Date().toDateString();
                    
                    if (lastCheckin === today) {
                        showNotification('âœ… ä»Šæ—¥å·²ç°½åˆ°éäº†ï¼', 'info');
                    } else {
                        localStorage.setItem('lastCheckin', today);
                        let points = parseInt(localStorage.getItem('userPoints') || '0');
                        points += 10;
                        localStorage.setItem('userPoints', points.toString());
                        showNotification(`ğŸ‰ ç°½åˆ°æˆåŠŸï¼ç²å¾—10é»æ•¸ï¼Œç¸½è¨ˆ${points}é»`, 'success');
                    }
                }
            };
            
            const action = activityActions[type];
            if (action) {
                action();
            } else {
                showNotification(`${type}æ´»å‹•é é¢é–‹ç™¼ä¸­`, 'info');
            }
        }

        // æ©«å‘æ²å‹•åŠŸèƒ½å¢å¼·
        function scrollHorizontal(containerId, direction) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            const scrollAmount = 300;
            const targetScrollLeft = container.scrollLeft + (direction * scrollAmount);
            
            // å¹³æ»‘æ»¾å‹•
            container.scrollTo({
                left: targetScrollLeft,
                behavior: 'smooth'
            });
            
            // æ›´æ–°æ²å‹•æŒ‰éˆ•ç‹€æ…‹
            setTimeout(() => {
                updateScrollButtons(containerId);
            }, 300);
        }

        // æ›´æ–°æ²å‹•æŒ‰éˆ•ç‹€æ…‹
        function updateScrollButtons(containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            const scrollContainer = container.parentElement;
            const leftBtn = scrollContainer.querySelector('.scroll-left');
            const rightBtn = scrollContainer.querySelector('.scroll-right');
            
            if (leftBtn) {
                leftBtn.style.opacity = container.scrollLeft <= 0 ? '0.5' : '1';
                leftBtn.style.pointerEvents = container.scrollLeft <= 0 ? 'none' : 'auto';
            }
            
            if (rightBtn) {
                const isAtEnd = container.scrollLeft >= (container.scrollWidth - container.clientWidth);
                rightBtn.style.opacity = isAtEnd ? '0.5' : '1';
                rightBtn.style.pointerEvents = isAtEnd ? 'none' : 'auto';
            }
        }

        // æ›´å¤šæ¨™ç±¤
        function showMoreTabs() {
            showNotification('ğŸ“‹ æ›´å¤šåˆ†é¡æ¨™ç±¤åŠŸèƒ½é–‹ç™¼ä¸­', 'info');
        }

        // å®¢æœåŠŸèƒ½
        function openCustomerService() {
            showNotification('ğŸ’¬ ç·šä¸Šå®¢æœåŠŸèƒ½é–‹ç™¼ä¸­', 'info');
        }

        // å›åˆ°é ‚éƒ¨åŠŸèƒ½
        function backToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // é€šçŸ¥ç³»çµ±
        function showNotification(message, type = 'info') {
            const colors = {
                success: '#4CAF50',
                info: '#2196F3',
                warning: '#ff9800',
                error: '#f44336'
            };
            
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background-color: ${colors[type]};
                color: white;
                padding: 15px 20px;
                border-radius: 5px;
                z-index: 1000;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                max-width: 300px;
                font-size: 14px;
                opacity: 0;
                transform: translateX(100%);
                transition: all 0.3s ease;
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // å‹•ç•«é€²å…¥
            setTimeout(() => {
                notification.style.opacity = '1';
                notification.style.transform = 'translateX(0)';
            }, 10);
            
            // è‡ªå‹•æ¶ˆå¤±
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.remove();
                    }
                }, 300);
            }, 3000);
        }

        // è¼ªæ’­åŠŸèƒ½å¢å¼·
        class CarouselManager {
            constructor() {
                this.currentSlide = 0;
                this.slides = [
                    {
                        title: 'æ–°æ›¸ä¸Šå¸‚',
                        subtitle: 'æ¢ç´¢æœ€æ–°å‡ºç‰ˆçš„ç²¾å½©æ›¸ç±',
                        background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                        action: () => showNewReleases()
                    },
                    {
                        title: 'æš¢éŠ·æ’è¡Œ',
                        subtitle: 'ç™¼ç¾æœ€å—æ­¡è¿çš„ç†±é–€æ›¸ç±',
                        background: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',
                        action: () => showBestsellers()
                    },
                    {
                        title: 'é›»å­æ›¸åŸ',
                        subtitle: 'éš¨æ™‚éš¨åœ°äº«å—æ•¸ä½é–±è®€',
                        background: 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',
                        action: () => showEbooks()
                    }
                ];
                this.init();
            }
            
            init() {
                this.updateSlide();
                this.startAutoSlide();
                this.attachEvents();
            }
            
            updateSlide() {
                const slideElement = document.querySelector('.carousel-slide');
                const dots = document.querySelectorAll('.nav-dot');
                
                if (slideElement) {
                    const slide = this.slides[this.currentSlide];
                    slideElement.style.background = slide.background;
                    slideElement.innerHTML = `
                        <div class="slide-content">
                            <h2 style="cursor: pointer;" onclick="carouselManager.slides[${this.currentSlide}].action()">${slide.title}</h2>
                            <p>${slide.subtitle}</p>
                        </div>
                    `;
                }
                
                dots.forEach((dot, index) => {
                    dot.classList.toggle('active', index === this.currentSlide);
                });
            }
            
            nextSlide() {
                this.currentSlide = (this.currentSlide + 1) % this.slides.length;
                this.updateSlide();
            }
            
            goToSlide(index) {
                this.currentSlide = index;
                this.updateSlide();
            }
            
            startAutoSlide() {
                setInterval(() => {
                    this.nextSlide();
                }, 5000);
            }
            
            attachEvents() {
                const dots = document.querySelectorAll('.nav-dot');
                dots.forEach((dot, index) => {
                    dot.addEventListener('click', () => {
                        this.goToSlide(index);
                    });
                });
            }
        }

        // ä¿®æ”¹åŸæœ‰çš„ç›¸é—œå‡½æ•¸
        function initializeBookCards() {
            console.log('ğŸš€ åˆå§‹åŒ–æ›¸ç±å¡ç‰‡');
            
            // è¼‰å…¥æ‰€æœ‰æ›¸ç±è³‡æ–™
            window.bookManager.loadAllBooks();
        }

        function switchTab(tabType, element) {
            if (window.bookManager) {
                window.bookManager.switchTab(tabType, element);
            }
        }

        function updateCartCount() {
            if (window.bookManager) {
                window.bookManager.updateCartDisplay();
            }
        }

        // é é¢è¼‰å…¥å®Œæˆå¾Œçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ¨ é¦–é è¼‰å…¥å®Œæˆï¼Œé–‹å§‹åˆå§‹åŒ–...');
            
            // æª¢æŸ¥ä¸¦æ›´æ–°ç™»å…¥ç‹€æ…‹
            checkAndUpdateLoginStatus();
            
            // æ›´æ–°è³¼ç‰©è»Šæ•¸é‡
            updateCartCount();
            
            // åˆå§‹åŒ–è¼ªæ’­
            window.carouselManager = new CarouselManager();
            
            // ç­‰å¾… Google Books API æº–å‚™å°±ç·’
            if (window.googleBooksAPI) {
                initializeBookCards();
            } else {
                // å¦‚æœ API é‚„æ²’æº–å‚™å¥½ï¼Œç­‰å¾…ä¸€ä¸‹
                setTimeout(() => {
                    if (window.googleBooksAPI) {
                        initializeBookCards();
                    } else {
                        console.warn('Google Books API æœªæº–å‚™å°±ç·’ï¼Œä½¿ç”¨å‚™ç”¨è³‡æ–™');
                        window.bookManager.loadFallbackData();
                        window.bookManager.updateAllDisplays();
                    }
                }, 2000);
            }
            
            // æ·»åŠ æœå°‹æ¡† Enter éµæ”¯æ´
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        performSearch();
                    }
                });
                
                // æ·»åŠ æœå°‹å»ºè­°åŠŸèƒ½ï¼ˆç°¡å–®ç‰ˆï¼‰
                searchInput.addEventListener('input', function() {
                    const value = this.value.trim();
                    if (value.length > 2) {
                        // é€™è£¡å¯ä»¥æ·»åŠ æœå°‹å»ºè­°é‚è¼¯
                        console.log('æœå°‹å»ºè­°:', value);
                    }
                });
            }
            
            // ç›£è½æ»¾å‹•äº‹ä»¶ï¼Œæ§åˆ¶å›åˆ°é ‚éƒ¨æŒ‰éˆ•å’Œæ²å‹•æŒ‰éˆ•ç‹€æ…‹
            window.addEventListener('scroll', function() {
                const backToTopBtn = document.querySelector('.back-to-top');
                if (backToTopBtn) {
                    if (window.pageYOffset > 300) {
                        backToTopBtn.classList.add('show');
                    } else {
                        backToTopBtn.classList.remove('show');
                    }
                }
            });
            
            // åˆå§‹åŒ–æ‰€æœ‰æ©«å‘æ²å‹•å®¹å™¨çš„æŒ‰éˆ•ç‹€æ…‹
            document.querySelectorAll('.horizontal-scroll').forEach(container => {
                updateScrollButtons(container.id);
                
                // ç›£è½æ²å‹•äº‹ä»¶
                container.addEventListener('scroll', function() {
                    updateScrollButtons(this.id);
                });
            });
            
            // è§¸æ§è¨­å‚™æ”¯æ´æ©«å‘æ»‘å‹•
            let startX = 0;
            let scrollLeft = 0;

            document.querySelectorAll('.horizontal-scroll').forEach(container => {
                container.addEventListener('touchstart', function(e) {
                    startX = e.touches[0].pageX - container.offsetLeft;
                    scrollLeft = container.scrollLeft;
                });

                container.addEventListener('touchmove', function(e) {
                    if (!startX) return;
                    e.preventDefault();
                    const x = e.touches[0].pageX - container.offsetLeft;
                    const walk = (x - startX) * 2;
                    container.scrollLeft = scrollLeft - walk;
                });

                container.addEventListener('touchend', function() {
                    startX = 0;
                });
            });
            
            // éµç›¤å¿«æ·éµæ”¯æ´
            document.addEventListener('keydown', function(e) {
                // Ctrl + / èšç„¦æœå°‹æ¡†
                if (e.ctrlKey && e.key === '/') {
                    e.preventDefault();
                    const searchInput = document.getElementById('searchInput');
                    if (searchInput) {
                        searchInput.focus();
                        searchInput.select();
                    }
                }
                
                // Ctrl + Home å›åˆ°é ‚éƒ¨
                if (e.ctrlKey && e.key === 'Home') {
                    e.preventDefault();
                    backToTop();
                }
                
                // Escape é—œé–‰ç”¨æˆ¶é¸å–®
                if (e.key === 'Escape') {
                    closeUserMenu();
                }
            });
            
            console.log('âœ… é¦–é åˆå§‹åŒ–å®Œæˆ');
            
            // é¡¯ç¤ºæ­¡è¿è¨Šæ¯
            setTimeout(() => {
                const isFirstVisit = !localStorage.getItem('hasVisited');
                if (isFirstVisit) {
                    showNotification('ğŸ“š æ­¡è¿ä¾†åˆ°æ›¸å®¢ä¾†ï¼é–‹å§‹æ‚¨çš„é–±è®€ä¹‹æ—…', 'success');
                    localStorage.setItem('hasVisited', 'true');
                }
            }, 1000);
        });

        // å…¨åŸŸéŒ¯èª¤è™•ç†
        window.addEventListener('error', function(e) {
            console.error('é é¢éŒ¯èª¤:', e.error);
        });

        // å…¨åŸŸæœªè™•ç†çš„ Promise æ‹’çµ•
        window.addEventListener('unhandledrejection', function(e) {
            console.error('æœªè™•ç†çš„ Promise æ‹’çµ•:', e.reason);
        });

        console.log('ğŸ“– æ›¸å®¢ä¾†é¦–é è…³æœ¬è¼‰å…¥å®Œæˆ');
    </script>
</body>
</html>